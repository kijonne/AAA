# Решение практической работы №11: Создание SQL-запросов на модификацию данных

## 5.1 Вставка новой записи в таблицу Книги
```sql
INSERT INTO Книги (Код_автора, Название, Жанр, Цена, Масса, Страницы, [Год выпуска])
VALUES (1, 'Новая книга', 'проза', 500.00, 0.5, 200, 2023);
```

## 5.2 Удаление заказчиков без телефона
```sql
DELETE FROM Заказчики
WHERE Телефон IS NULL OR Телефон = '';
```

## 5.3 Изменение цены книг со словом "Сказки" в названии
```sql
UPDATE Книги
SET Цена = Цена - 100
WHERE Название LIKE '%Сказки%';
```

## 5.4 Создание таблицы Prose с книгами жанра "проза"
```sql
SELECT 
    a.Фамилия,
    a.Имя,
    k.Название AS Наименование_книги,
    k.Цена,
    k.[Год выпуска]
INTO Prose
FROM Книги k
JOIN Авторы a ON k.Код_автора = a.Код_автора
WHERE k.Жанр = 'проза';
```

## 5.5 Удаление пустых заказов
```sql
DELETE FROM Заказы
WHERE Номер_заказа NOT IN (
    SELECT Номер_заказа FROM Состав
);
```

## 5.6 Увеличение цены книг российских авторов
```sql
UPDATE Книги
SET Цена = Цена + 100
FROM Книги k
JOIN Авторы a ON k.Код_автора = a.Код_автора
WHERE a.Страна = 'Россия';
```

## 5.7 Изменение цен по жанрам с использованием CASE
```sql
UPDATE Книги
SET Цена = CASE
    WHEN Жанр = 'проза' THEN Цена * 0.9  -- уменьшаем на 10%
    WHEN Жанр = 'поэзия' THEN Цена + 100  -- увеличиваем на 100 рублей
    ELSE Цена  -- остальные жанры без изменений
END;
```

## Ответы на контрольные вопросы

### 8.1 Причины ошибок при выполнении DML-команд:
- Нарушение ограничений целостности (первичные/внешние ключи)
- Нарушение проверочных ограничений (CHECK constraints)
- Несоответствие типов данных
- Отсутствие прав доступа
- Попытка изменения несуществующих записей

### 8.2 Обновляемое поле указывается после ключевого слова SET
